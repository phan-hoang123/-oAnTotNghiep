<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chi Tiết Sản Phẩm - Sơ Mi Nam</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #f0f2f5; }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 15px; }
        #header-simple { background-color: white; padding: 15px 0; text-align: center; border-bottom: 1px solid #ddd; }
        #header-simple h1 { font-size: 1.8rem; font-weight: bold; color: #1e3a8a; }

        #product-detail-area { display: grid; grid-template-columns: 1fr; gap: 40px; margin-top: 30px; }
        @media (min-width: 768px) {
            #product-detail-area { grid-template-columns: 2fr 3fr; }
        }

        .image-gallery .main-image img { width: 100%; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .thumbnail-images { display: flex; gap: 10px; margin-top: 10px; }
        .thumbnail-images img { width: 80px; height: 80px; object-fit: cover; cursor: pointer; border-radius: 4px; border: 2px solid transparent; transition: border-color 0.2s; }
        .thumbnail-images img.selected { border-color: #1e3a8a; }

        .product-info h2 { font-size: 1.75rem; font-weight: bold; color: #1f2937; margin-bottom: 10px; }
        .sku-rating { display: flex; gap: 20px; font-size: 0.9rem; color: #6b7280; margin-bottom: 15px; }
        .price-area .old-price { text-decoration: line-through; color: #9ca3af; margin-right: 10px; }
        .price-area .current-price { font-size: 2rem; font-weight: bold; color: #dc2626; }

        .size-options, .color-options { margin-top: 15px; display: flex; align-items: center; }
        .size-options label, .color-options label { font-weight: 600; color: #1f2937; margin-right: 15px; }
        .size-options span { 
            display: inline-flex; 
            justify-content: center; 
            align-items: center; 
            width: 40px; 
            height: 40px; 
            border: 1px solid #d1d5db; 
            border-radius: 6px; 
            margin-right: 8px; 
            cursor: pointer; 
            transition: all 0.2s;
            font-size: 0.9rem;
            color: #374151;
        }
        .size-options span.selected { border-color: #1e3a8a; background-color: #eff6ff; font-weight: bold; }
        
        .color-option-item { 
            display: inline-block; 
            width: 30px; 
            height: 30px; 
            border-radius: 50%; 
            border: 2px solid transparent; 
            margin-right: 10px; 
            cursor: pointer; 
            transition: border-color 0.2s;
        }
        .color-option-item.selected { border-color: #1e3a8a; transform: scale(1.1); }

        .quantity-input { width: 70px; padding: 10px; border: 1px solid #d1d5db; border-radius: 6px; text-align: center; margin-right: 15px; }
        .buy-btn { 
            padding: 12px 30px; 
            background-color: #dc2626; 
            color: white; 
            font-weight: bold; 
            border-radius: 6px; 
            transition: background-color 0.2s;
            text-transform: uppercase;
        }
        .buy-btn:hover { background-color: #b91c1c; }

        .policy-info { margin-top: 30px; padding: 20px; background-color: #f3f4f6; border-radius: 8px; }
        .policy-info ul { list-style-type: none; padding-left: 0; margin-top: 10px; }
        .policy-info li { margin-bottom: 5px; color: #374151; }

        #product-tabs { margin-top: 50px; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .tabs-header { display: flex; border-bottom: 2px solid #e5e7eb; margin-bottom: 20px; }
        .tab-link { 
            padding: 10px 20px; 
            cursor: pointer; 
            font-weight: 600; 
            color: #6b7280; 
            border-bottom: 3px solid transparent; 
            transition: all 0.2s; 
        }
        .tab-link.active { color: #1e3a8a; border-bottom-color: #1e3a8a; }
        .tab-content h3 { font-size: 1.25rem; font-weight: bold; margin-bottom: 10px; color: #1f2937; }
        .tab-content ul { list-style: disc; padding-left: 25px; margin-top: 10px; }
        .tab-content.hidden { display: none; }
        
        .product-grid-new { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px; margin-top: 20px; }
        .product-card-new { border: 1px solid #eee; border-radius: 8px; overflow: hidden; background: white; transition: box-shadow 0.2s; }
        .product-card-new:hover { box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        .product-image-new { position: relative; overflow: hidden; }
        .product-image-new img { width: 100%; height: auto; transition: transform 0.3s; }
        .product-card-new:hover .product-image-new img { transform: scale(1.05); }
        .product-info-new { padding: 15px; }
        .product-name-new { font-weight: 600; font-size: 1rem; margin-bottom: 5px; }
        .product-price-new { font-weight: bold; color: #dc2626; margin-top: 5px; }
        .quick-view-btn { width: 100%; padding: 10px 0; background-color: #1e3a8a; color: white; border: none; font-weight: 600; cursor: pointer; transition: background-color 0.2s; }
        .quick-view-btn:hover { background-color: #1d4ed8; }
        .product-attributes { font-size: 0.85rem; color: #6b7280; }
        .product-badge { position: absolute; top: 10px; left: 10px; padding: 4px 8px; border-radius: 4px; font-size: 0.75rem; font-weight: bold; color: white; }
        .new-badge { background-color: #34d399; } /* green */
        .sale-badge { background-color: #f59e0b; } /* amber */

    </style>
</head>
<body>
    <div id="header-simple">
        <h1>TORANO</h1>
    </div>
    
    <div class="container py-3">
        <p class="text-sm text-gray-500">
            <a href="/demo/src/main/resources/Trang chủ/trangchu.html" class="hover:text-blue-600">Trang Chủ</a> &gt; 
            <a href="/demo/src/main/resources/Sản phẩm/phukien.html" class="hover:text-blue-600">Phụ Kiện & Giày Dép</a>
        </p>
    </div>

    <div id="product-detail-area" class="container bg-white p-6 rounded-xl shadow-lg">

        <div class="image-gallery">
            <div class="main-image">
                <img id="main-product-image" src="/demo/src/main/resources/Chi tiết sản phẩm/Chi tiết áo sơ mi/anh 1.jpg" alt="Sơ Mi Nam Trắng Cao Cấp - Ảnh chính">
            </div>
            <div class="thumbnail-images">
                <img src="/demo/src/main/resources/Chi tiết sản phẩm/Chi tiết áo sơ mi/anh(2).jpg" alt="Ảnh 1" class="selected" data-main-src="https://placehold.co/600x600/1e3a8a/ffffff?text=Sơ+Mi+Trắng+Chính">
                <img src="/demo/src/main/resources/Chi tiết sản phẩm/Chi tiết áo sơ mi/anh(4).jpg" alt="Ảnh 2" data-main-src="https://placehold.co/600x600/3b82f6/ffffff?text=Sơ+Mi+Trắng+Góc+Nghiêng">
                <img src="/demo/src/main/resources/Chi tiết sản phẩm/Chi tiết áo sơ mi/Anh2.jpg" alt="Ảnh 3" data-main-src="https://placehold.co/600x600/9333ea/ffffff?text=Sơ+Mi+Trắng+Chi+Tiết+Cổ">
                <img src="/demo/src/main/resources/Chi tiết sản phẩm/Chi tiết áo sơ mi/Anh5.jpg" alt="Ảnh 4" data-main-src="https://placehold.co/600x600/f97316/ffffff?text=Sơ+Mi+Trắng+Chi+Tiết+Tay">
            </div>
        </div>

        <div class="product-info">
            <h2>Sơ Mi Nam Trắng Tay Dài Dáng Slimfit</h2>
            
            <div class="sku-rating">
                <span>Mã sản phẩm: <strong id="product-sku">PSM001</strong></span>
                <span>⭐⭐⭐⭐⭐ (35 Đánh giá)</span>
            </div>

            <div class="price-area">
                <span class="old-price">790.000 VNĐ</span>
                <span class="current-price" id="product-price-display">599.000 VNĐ</span>
                <p style="color:#dc2626; font-weight:bold; margin-top:5px;">TIẾT KIỆM: 191.000 VNĐ</p>
            </div>

            <div class="options">
                <div class="size-options">
                    <label>Kích cỡ:</label>
                    <span class="size-option selected" data-value="S">S</span>
                    <span class="size-option" data-value="M">M</span>
                    <span class="size-option" data-value="L">L</span>
                    <span class="size-option" data-value="XL">XL</span>
                    <span class="size-option" data-value="XXL">XXL</span>
                    <a href="#size-chart" style="color:#1e3a8a; margin-left:15px; font-weight:normal; font-size:0.9em;">(Xem Bảng Size)</a>
                </div>
                
                <div class="color-options">
                    <label>Màu sắc:</label>
                    <span class="color-option-item selected" data-color-name="Trắng" data-color-value="white" style="background-color:white; border-color:#dc2626;"></span>
                    <span class="color-option-item" data-color-name="Xanh Nhạt" data-color-value="lightblue" style="background-color:lightblue; border:1px solid #d1d5db;"></span>
                    <span class="color-option-item" data-color-name="Đen" data-color-value="black" style="background-color:#333; border:1px solid #d1d5db;"></span>
                </div>
            </div>

            <div class="add-to-cart-area flex items-center mt-6">
                <input type="number" id="quantity-input" value="1" min="1" class="quantity-input" aria-label="Số lượng">
                <button id="add-to-cart-btn" class="buy-btn">THÊM VÀO GIỎ HÀNG</button>
            </div>
            
            <p id="add-to-cart-message" class="text-green-600 font-semibold mt-3 hidden">Đã thêm sản phẩm vào giỏ hàng thành công!</p>

            <button class="buy-btn" style="background-color: #1f2937; margin-top: 15px;">MUA NGAY (Giao Hàng Tận Nơi)</button>
            <a href="/demo/src/main/resources/Trang chủ/Giỏ hàng/giohang.html" class="block text-blue-600 font-semibold mt-3 hover:underline">Xem Giỏ Hàng &rarr;</a>

            <div class="policy-info">
                <p style="font-weight:bold; color:#dc2626;">CHÍNH SÁCH CỬA HÀNG</p>
                <ul>
                    <li>✓ Miễn phí giao hàng toàn quốc.</li>
                    <li>✓ Đổi hàng trong 7 ngày (Sản phẩm còn nguyên tem mác).</li>
                    <li>✓ Thanh toán khi nhận hàng (COD).</li>
                </ul>
            </div>
        </div>
    </div>

    <div id="product-tabs" class="container mt-10">
        <div class="tabs-header">
            <span class="tab-link active" data-tab="description">MÔ TẢ SẢN PHẨM</span>
            <span class="tab-link" data-tab="specs">ĐÁNH GIÁ CÁC SẢN PHẨM</span>
            <span class="tab-link" data-tab="reviews">CHÍNH SÁCH SẢN PHẨM</span>
        </div>

        <div class="tab-content-container">
            <div id="description" class="tab-content active p-4">
                <h3>Chi Tiết Sơ Mi Nam Tay Dài</h3>
                <p>Sơ mi nam dáng Slimfit là trang phục cơ bản không thể thiếu, mang lại vẻ ngoài trẻ trung và chuyên nghiệp.</p>
                <ul>
                    <li><strong>Chất liệu:</strong> Vải cao cấp chống nhăn, thoáng khí.</li>
                    <li><strong>Kiểu dáng:</strong> Slim Fit (Ôm vừa phải, tôn dáng).</li>
                    <li><strong>Đặc điểm nổi bật:</strong> Dễ ủi, ít nhăn, phù hợp công sở và các buổi tiệc.</li>
                </ul>
            </div>
            <div id="specs" class="tab-content hidden p-4">
                <p>Chưa có đánh giá nào cho sản phẩm này.</p>
            </div>
            <div id="reviews" class="tab-content hidden p-4">
                <h3><strong>Chính sách đổi trả</strong></h3>
                <ul>
                    <li>Sản phẩm nguyên giá chỉ được đổi 01 lần duy nhất sang sản phẩm nguyên giá khác và không thấp hơn giá trị sản phẩm đã mua.</li>
                    <li>Đổi hàng trong vòng 07 ngày kể từ ngày khách hàng nhận được sản phẩm.</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="container text-center py-10">
        <h2 class="text-2xl font-bold text-gray-800 mb-6">SẢN PHẨM TƯƠNG TỰ</h2>
        <main class="product-grid-new">
            <div class="product-card-new">
                <a href="#" class="product-link">
                    <div class="product-image-new">
                        <img src="/demo/src/main/resources/Chi tiết sản phẩm/chi tiết áo phông/anh1.jpg" alt="Áo Phông Polo Thể Thao">
                        <span class="product-badge new-badge">NEW ARRIVAL</span>
                    </div>
                    <div class="product-info-new">
                        <h3 class="product-name-new">Áo phông polo</h3>
                        <p class="product-attributes">Màu: Trắng đen | Form: Slimfit</p>
                        <p class="product-price-new">
                            <span class="current-price-new">500.000₫</span>
                        </p>
                    </div>
                    <button class="quick-view-btn">Mua Ngay</button>
                </a>
            </div>
            <div class="product-card-new">
                <a href="#" class="product-link">
                    <div class="product-image-new">
                        <img src="/demo/src/main/resources/Chi tiết sản phẩm/chi tiết áo phông/anh3.png" alt="Áo Phông Oversize">
                        <span class="product-badge sale-badge">-25%</span>
                    </div>
                    <div class="product-info-new">
                        <h3 class="product-name-new">Áo phông oversize</h3>
                        <p class="product-attributes">Màu: Navy | Form: Oversize</p>
                        <p class="product-price-new">
                            <span class="original-price-new text-gray-400 line-through mr-2">599.000₫</span>
                            <span class="current-price-new">449.250₫</span>
                        </p>
                    </div>
                    <button class="quick-view-btn">Mua Ngay</button>
                </a>
            </div>
            <div class="product-card-new">
                <a href="#" class="product-link">
                    <div class="product-image-new">
                        <img src="/demo/src/main/resources/Chi tiết sản phẩm/Chi tiết áo sơ mi/Anh4.jpg" alt="Áo Phông Cổ Tím">
                    </div>
                    <div class="product-info-new">
                        <h3 class="product-name-new">Áo phông cổ tròn</h3>
                        <p class="product-attributes">Màu: Đen | Form: oversize</p>
                        <p class="product-price-new">
                            <span class="current-price-new">799.000₫</span>
                        </p>
                    </div>
                    <button class="quick-view-btn">Mua Ngay</button>
                </a>
            </div>
            <div class="product-card-new">
                <a href="#" class="product-link">
                    <div class="product-image-new">
                        <img src="/demo/src/main/resources/Chi tiết sản phẩm/chi tiết áo phông/anh3.png" alt="Áo Phông Tay Dài">
                    </div>
                    <div class="product-info-new">
                        <h3 class="product-name-new">Áo phông tay dài</h3>
                        <p class="product-attributes">Màu: Xanh Dương | Form: Regular Fit</p>
                        <p class="product-price-new">
                            <span class="current-price-new">599.000₫</span>
                        </p>
                    </div>
                    <button class="quick-view-btn">Mua Ngay</button>
                </a>
            </div>
        </main>
    </div>

    <div id="footer" style="background-color: #1a1a1a; color: #ccc; text-align: center; padding: 20px 0; margin-top: 50px;">
        <p>&copy; 2025 TORANO Vietnam. Mọi bản quyền đều được bảo lưu.</p>
    </div>

    <script>
        const PRODUCT_DATA = {
            id: 'PSM001',
            name: 'Sơ Mi Nam Trắng Tay Dài Dáng Slimfit',
            basePrice: 599000,
            image: 'https://placehold.co/80x80/1e3a8a/ffffff?text=SM', // Ảnh nhỏ cho giỏ hàng
            detailsUrl: 'chi_tiet_san_pham_somi.html'
        };

        let selectedSize = 'S';
        let selectedColorName = 'Trắng';
        let selectedColorValue = 'white';
        let selectedQuantity = 1;

        const tabLinks = document.querySelectorAll('.tab-link');
        tabLinks.forEach(link => {
            link.addEventListener('click', () => {
                document.querySelectorAll('.tab-link').forEach(l => l.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.add('hidden'));

                link.classList.add('active');

                const tabName = link.getAttribute('data-tab');
                document.getElementById(tabName).classList.remove('hidden');
            });
        });

        document.querySelectorAll('.size-option').forEach(span => {
            span.addEventListener('click', () => {
                document.querySelectorAll('.size-option').forEach(s => s.classList.remove('selected'));
                span.classList.add('selected');
                selectedSize = span.getAttribute('data-value');
            });
        });

        document.querySelectorAll('.color-option-item').forEach(span => {
            span.addEventListener('click', () => {
                document.querySelectorAll('.color-option-item').forEach(c => {
                    c.classList.remove('selected');
                    if (c.style.borderColor === 'rgb(220, 38, 38)') {
                        c.style.borderColor = 'transparent';
                    }
                    c.style.border = '1px solid #d1d5db'; 
                });

                span.classList.add('selected');
                selectedColorName = span.getAttribute('data-color-name');
                selectedColorValue = span.getAttribute('data-color-value');
                
                span.style.border = '2px solid #dc2626';
            });
        });

        document.getElementById('quantity-input').addEventListener('change', (e) => {
            selectedQuantity = parseInt(e.target.value) || 1;
            if (selectedQuantity < 1) {
                selectedQuantity = 1;
                e.target.value = 1;
            }
        });

        document.getElementById('add-to-cart-btn').addEventListener('click', () => {
            
            const quantity = parseInt(document.getElementById('quantity-input').value) || 1;

            const variantId = `${PRODUCT_DATA.id}-${selectedSize}-${selectedColorName}`;

            const newItem = {
                id: variantId, 
                productId: PRODUCT_DATA.id,
                name: PRODUCT_DATA.name,
                price: PRODUCT_DATA.basePrice,
                quantity: quantity,
                size: selectedSize,
                color: selectedColorName,
                image: PRODUCT_DATA.image,
                detailsUrl: PRODUCT_DATA.detailsUrl
            };

            let cart = [];
            try {
                cart = JSON.parse(localStorage.getItem('shoppingCart')) || [];
            } catch (e) {
                console.error("Lỗi khi đọc giỏ hàng:", e);
                cart = [];
            }

            const existingItemIndex = cart.findIndex(item => item.id === variantId);

            if (existingItemIndex > -1) {
                cart[existingItemIndex].quantity += quantity;
            } else {
                cart.push(newItem);
            }

            localStorage.setItem('shoppingCart', JSON.stringify(cart));

            const msgBox = document.getElementById('add-to-cart-message');
            msgBox.textContent = `Đã thêm ${quantity} sản phẩm ${PRODUCT_DATA.name} (Size: ${selectedSize}, Màu: ${selectedColorName}) vào giỏ hàng!`;
            msgBox.classList.remove('hidden');
            setTimeout(() => { msgBox.classList.add('hidden'); }, 3500);
            
            console.log('Giỏ hàng đã lưu:', cart);

        });

        document.querySelectorAll('.thumbnail-images img').forEach(img => {
            img.addEventListener('click', () => {
                const newSrc = img.getAttribute('data-main-src');
                document.getElementById('main-product-image').src = newSrc;

                document.querySelectorAll('.thumbnail-images img').forEach(i => i.classList.remove('selected'));
                img.classList.add('selected');
            });
        });

        window.onload = () => {
            document.querySelector('.size-option[data-value="S"]').click();
            document.querySelector('.color-option-item[data-color-name="Trắng"]').click();
        };

    </script>
</body>
</html>